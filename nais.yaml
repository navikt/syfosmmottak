team: teamsykefravr
name: "syfosmmottak"
image: "repo.adeo.no:5443/syfo/syfosmmottak"
replicas:
  min: 1
  max: 4
  cpuThresholdPercentage: 90
port: 8080
healthcheck:
  liveness:
    path: /is_alive
    # wait 30 seconds before trying to check status,
    # and then try 30 times with 5 second intervals before
    # killing the pod: 30 + 5*30 = 180 seconds before pod is killed
    initialDelay: 5
    periodSeconds: 5
    failureThreshold: 30
  readiness:
    path: /is_ready
    initialDelay: 30
    periodSeconds: 5
    timeout: 5
prometheus:
  enabled: true
  path: /prometheus
resources:
  limits:
    cpu: 250m
    memory: 1Gi
  requests:
    cpu: 100m
    memory: 128Mi
redis:
  enabled: true
  limits:
    cpu: 100m
    memory: 128Mi
  requests:
    cpu: 100m
    memory: 128Mi
secrets: true
fasitResources:
  used:
    - alias: mqGateway04
      resourceType: QueueManager
    - alias: syfosmmottak_channel
      resourceType: Channel
#    - alias: syfosmmottak_input_queue
#      resourceType: Queue
    - alias: syfosmmottak_temp_routed_input
      resourceType: Queue
      propertyMap:
        queueName: SYFOSMMOTTAK_INPUT_QUEUE_QUEUENAME
#   - alias: mottak_queue_utsending TODO after testing
    - alias: syfosmapprec_utsending
      resourceType: Queue
      propertyMap:
        queueName: MOTTAK_QUEUE_UTSENDING_QUEUENAME
    - alias: kafka_bootstrap_servers
      resourceType: baseurl
    - alias: aktoerregister.api.v1
      resourceType: RestService
    - alias: eia_queue_syfo_outbound
      resourceType: Queue
      propertyMap:
        queueName: SYFOSERVICE_OUTBOUND_QUEUE_QUEUENAME
